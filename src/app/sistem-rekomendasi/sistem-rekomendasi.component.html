<!-- #region Navbar -->
<nav class="navbar navbar-expand-lg navbar-expand-sm navbar-expand-md navbar-dark bg-dark">
    <div class="container-fluid">
        <span class="navbar-brand mb-0">
            <img
                src="./assets/images/LogoTree.png"
                height="80"
                alt=""
                loading="lazy"
            />
        </span>

        <div class="navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav me-auto">
                <li class="nav-item">
                    <a class="nav-link" [ngClass]="{ 'active' : Mode == ModeMainMenu }" aria-current="page" (click)="ChangeMenuHandler(ModeMainMenu)"><i class="bi bi-house-fill" style="margin-right: 5px;"></i>Home</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" [ngClass]="{ 'active' : Mode == ModeSistemRekomendasi }" aria-current="page" (click)="ChangeMenuHandler(ModeSistemRekomendasi)"><i class="bi bi-buildings" style="margin-right: 5px;"></i>Sistem Pendukung Keputusan</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" [ngClass]="{ 'active' : Mode == ModeSetting }" aria-current="page" (click)="ChangeMenuHandler(ModeSetting)"><i class="bi bi-gear" style="margin-right: 5px;"></i>Settings</a>
                </li>
            </ul>
            <ul class="navbar-nav ms-auto">
                <li class="nav-item">
                    <a class="nav-link" [ngClass]="{ 'active' : Mode.includes('Admin')}" aria-current="page" (click)="ChangeMenuHandler(ModeAdminLogin)"><i class="bi bi-person-fill-gear" style="margin-right: 5px;"></i>Admin Mode</a>
                </li>
                <li *ngIf="EnableLogOut == true" class="nav-item">
                    <a class="nav-link"  aria-current="page" (click)="AdminLogout()"><i class="bi bi-door-closed-fill" style="margin-right: 5px;"></i>Admin Logout</a>
                </li>
            </ul>
        </div>
    </div>
</nav>
<!-- #endregion -->

<div id="mainMenuBG" class="bg-image" *ngIf="Mode.includes('Admin') == false">
    <!-- #region Main Menu (DONE) -->
    <div *ngIf="Mode == ModeMainMenu">
        <div class="d-flex align-items-center justify-content-center p-3">
            <!-- Carousel -->
            <div id="carouselMainMenu" class="carousel slide carousel-fade" data-bs-ride="carousel">
                <div class="carousel-indicators">
                    <button type="button" data-bs-target="#carouselMainMenu" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
                    <button type="button" data-bs-target="#carouselMainMenu" data-bs-slide-to="1" aria-label="Slide 2"></button>
                    <button type="button" data-bs-target="#carouselMainMenu" data-bs-slide-to="2" aria-label="Slide 3"></button>
                    <button type="button" data-bs-target="#carouselMainMenu" data-bs-slide-to="3" aria-label="Slide 4"></button>
                    <button type="button" data-bs-target="#carouselMainMenu" data-bs-slide-to="4" aria-label="Slide 5"></button>
                </div>
                <div class="carousel-inner">
                    <div class="carousel-item active">
                        <img src="./assets/images/CarouselItem1.jpg" class="d-block w-100" style="height: 300px;">
                    </div>
                    <div class="carousel-item">
                        <img src="./assets/images/CarouselItem2.jpg" class="d-block w-100" style="height: 300px;">
                    </div>
                    <div class="carousel-item">
                        <img src="./assets/images/CarouselItem3.jpg" class="d-block w-100" style="height: 300px;">
                    </div>
                    <div class="carousel-item">
                        <img src="./assets/images/CarouselItem4.jpg" class="d-block w-100" style="height: 300px;">
                    </div>
                    <div class="carousel-item">
                        <img src="./assets/images/CarouselItem5.jpg" class="d-block w-100" style="height: 300px;">
                    </div>
                </div>
                <button class="carousel-control-prev" type="button" data-bs-target="#carouselMainMenu" data-bs-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Previous</span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#carouselMainMenu" data-bs-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Next</span>
                </button>
            </div>
        </div>
    
        <div class="container">
            <div class="row mb-3">
                <div class="col-md-3"></div>
                <div class="col-md-6 col-sm-12">
                    <div class="card text-center">
                        <div class="card-body text-white text-bold">
                            <img src="./assets/images/LogoTree.png" width="300" class="img-fluid" alt="Logo">
                            <p>Situs ini membantu merekomendasikan <b>Tempat Penginapan</b> pada daerah yang dipilih berdasarkan <b>Harga, Rating Kebersihan, Rating Fasilitas, Rating Pelayanan</b>, dan <b>Rating Lokasi</b>. Mulai mencari rekomendasi dengan memilih <b>Sistem Pendukung Keputusan</b>, atau <b>Setting</b> untuk mengatur bobot kriteria untuk penilaian dalam pemberian rekomendasi.</p>
                        </div>
                    </div>
                </div>
            </div>
    
            <div class="row">
                <div class="col-md-6 col-sm-12 mb-3">
                    <div class="card text-center">
                        <div class="d-grid gap-2">
                            <button type="button" class="btn btn-light" (click)="ChangeMenuHandler(ModeSistemRekomendasi)"><i class="bi bi-buildings" style="margin-right: 5px;"></i><b>Sistem Pendukung Keputusan</b></button>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 col-sm-12 mb-3">
                    <div class="card text-center">
                        <div class="d-grid gap-2">
                            <button type="button" class="btn btn-dark" (click)="ChangeMenuHandler(ModeSetting)"><i class="bi bi-gear" style="margin-right: 5px;"></i><b>Settings</b></button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- #endregion -->

    <!-- #region Sistem Pendukung Keputusan (DONE) -->
    <div class="content" *ngIf="Mode == ModeSistemRekomendasi">
        <div class="container">
            <div class="row mb-3">
                <div class="col-md-12 pt-3 d-flex justify-content-end">
                    <button type="button" class="btn btn-light" (click)="ChangeMenuHandler(ModeMainMenu)"><i class="bi bi-house-up-fill" style="margin-right: 5px;"></i>Kembali ke Home</button>
                </div>
            </div>

            <form class="form form-horizontal" [formGroup]="UserForm" #enjiForm="ngForm" novalidate (ngSubmit)="UserForm.valid && UserSearch()"> 
                <div class="row mb-3">
                    <div class="col-md-3 pt-3">
                        <div class="row">
                            <div class="col-md-12 text-white text-bold">
                                <label class="label-field" translate>Harga dari</label>
                            </div>
                            <div class="col-md-12">
                                <input type="text" currencyMask id="HargaDari" class="form-control" placeholder="Harga dari" formControlName="HargaDari"
                                [ngClass]="{'is-invalid' : enjiForm.submitted && UserForm.controls['HargaDari'].invalid}"
                                [options]="{ prefix: 'Rp' }"/>
                                <div *ngIf="enjiForm.submitted && UserForm.controls['HargaDari'].invalid" class="invalid-feedback">
                                    <div *ngIf="UserForm.controls['HargaDari'].errors['required']">
                                        Wajib diisi.
                                    </div>
                                    <div *ngIf="UserForm.controls['HargaDari'].errors['min'] || UserForm.controls['HargaDari'].errors['max']">
                                        Wajib diisi dengan nilai diantara 0 dan 999,999,999,999,999.
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3 pt-3">
                        <div class="row">
                            <div class="col-md-12 text-white text-bold">
                                <label class="label-field" translate>Harga hingga</label>
                            </div>
                            <div class="col-md-12">
                                <input type="text" currencyMask id="HargaHingga" class="form-control" placeholder="Harga hingga" formControlName="HargaHingga"
                                [ngClass]="{'is-invalid' : enjiForm.submitted && UserForm.controls['HargaHingga'].invalid}"
                                [options]="{ prefix: 'Rp' }"/>
                                <div *ngIf="enjiForm.submitted && UserForm.controls['HargaHingga'].invalid" class="invalid-feedback">
                                    <div *ngIf="UserForm.controls['HargaHingga'].errors['required']">
                                        Wajib diisi.
                                    </div>
                                    <div *ngIf="UserForm.controls['HargaHingga'].errors['min'] || UserForm.controls['HargaHingga'].errors['max']">
                                        Wajib diisi dengan nilai diantara 0 dan 999,999,999,999,999.
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3 pt-3">
                        <div class="row">
                            <div class="col-md-12 text-white text-bold">
                                <label class="label-field" translate>Daerah</label>
                            </div>
                            <div class="col-md-12">
                                <select class="form-control" style="width: inherit" formControlName="Daerah"
                                [ngClass]="{'is-invalid' : enjiForm.submitted && UserForm.controls['Daerah'].invalid}">
                                    <option value="">Pilih Daerah</option>
                                    <option *ngFor="let item of ListDaerah" [value]="item">
                                        {{item}}
                                    </option>
                                </select>
                                <div *ngIf="enjiForm.submitted && UserForm.controls['Daerah'].invalid" class="invalid-feedback">
                                    <div *ngIf="UserForm.controls['Daerah'].errors['required']">
                                        Daerah Tempat Penginapan wajib diisi.
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3 pt-3">
                        <div class="row">
                            <div class="col-md-12 text-white text-bold">
                                <label class="label-field" translate>Jenis</label>
                            </div>
                            <div class="col-md-12">
                                <select class="form-control" style="width: inherit" formControlName="Jenis">
                                    <option value="">Semua</option>
                                    <option *ngFor="let item of ListJenis" [value]="item">
                                        {{item}}
                                    </option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-12 mt-3 d-flex justify-content-end">
                        <button type="button" style="margin-right: 10px;" class="btn btn-warning" (click)="ResetSearch()"><i class="bi bi-x-circle-fill" style="margin-right: 5px;"></i>Reset</button>
                        <button type="submit" class="btn btn-dark"><i class="bi bi-search" style="margin-right: 5px;"></i>Cari Rekomendasi</button>
                    </div>
                </div>
            </form>


            <div class="row mb-3" *ngIf="ListSortedResult.length > 0">
                <div class="col-md-12">
                    <div *ngFor="let item of ListSortedResult; let i = index" class="row p-3">
                        <div class="col-md-12">
                            <a (click)="OpenDetail(i)" class="card-link">
                                <div class="card bg-light">
                                    <div class="row g-0">
                                        <div class="col-md-4">
                                            <img [src]="item.data.File64" class="img-fluid rounded-start" [alt]="item.Nama" style="object-fit: cover; height: 100%;">
                                        </div>
                                        <div class="col-md-8">
                                            <div class="card-body">
                                            <h4 class="card-title">{{ item.Nama }}</h4>
                                            <p class="card-text">Harga: Rp{{ item.data.Harga | currency: '':'' }}</p>
                                            <p class="card-text">Jenis: {{ item.data.Jenis }}</p>
                                            <p class="card-text">Alamat: {{ item.data.Alamat }}</p>
                                            <div class="row">
                                                <div class="col-md-3">
                                                    <p>Kebersihan: <i class="bi bi-star-fill" style="margin-right: 5px;"></i>{{ item.data.Kebersihan }}</p>
                                                </div>
                                                <div class="col-md-3">
                                                    <p>Fasilitas: <i class="bi bi-star-fill" style="margin-right: 5px;"></i>{{ item.data.Fasilitas }}</p>
                                                </div>
                                                <div class="col-md-3">
                                                    <p>Pelayanan: <i class="bi bi-star-fill" style="margin-right: 5px;"></i>{{ item.data.Pelayanan }}</p>
                                                </div>
                                                <div class="col-md-3">
                                                    <p>Lokasi: <i class="bi bi-star-fill" style="margin-right: 5px;"></i>{{ item.data.Lokasi }}</p>
                                                </div>
                                            </div>
                                            <p class="card-text">Score: <b>{{ (item.Score * 100) | number: '1.2-2' }}</b></p>
                                            <p class="card-text"><small class="text-body-secondary">Click untuk melihat detail</small></p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- #endregion -->

    <!-- #region Setting (DONE) -->
    <div *ngIf="Mode == ModeSetting">
        <div class="container">
            <div class="row">
                <div class="col-md-12 pt-3 d-flex justify-content-end">
                    <button type="button" class="btn btn-light" (click)="ChangeMenuHandler(ModeMainMenu)"><i class="bi bi-house-up-fill" style="margin-right: 5px;"></i>Kembali ke Home</button>
                </div>
            </div>
            <div class="row py-3">
                <div class="col-md-3"></div>
                <div class="col-md-6 col-sm-12">
                    <div class="card text-center">
                        <div class="card-body text-white text-bold">
                            <h1>Settings</h1>
                            <p><b>Bobot Kriteria</b> digunakan dalam perhitungan sistem untuk memberikan rekomendasi. Atur <b>Bobot Kriteria</b> sesuai preferensi dalam jarak <b>1 hingga 5</b>. Semakin besar bobot maka semakin penting kriteria tersebut.</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row py-3">
                <div class="col-md-3"></div>
                <div class="col-md-6 col-sm-12">
                    <div class="card text-center">
                        <div class="card-body text-white text-bold">
                            <div class="row mb-3">
                                <div class="col-md-12">
                                    <h1>Bobot Kriteria</h1>
                                </div>
                            </div>
                            <div class="white-line"></div>
                            <div class="row mb-3">
                                <div class="col-md-4 col-sm-4">
                                    <h4><i class="bi bi-tags-fill" style="margin-right: 5px;"></i>Harga</h4>
                                </div>
                                <div class="col-md-8 col-sm-8 d-flex justify-content-center align-items-center">
                                    <button type="button" class="btn btn-secondary rounded-circle me-5" (click)="WeightValueHandler(WeightDecrease, 0)"><i class="bi bi-arrow-left-circle fw-bold"></i></button>
                                    <div class="text-center">
                                        <h4>{{ currentWeight[0] }}</h4>
                                    </div>
                                    <button type="button" class="btn btn-secondary rounded-circle ms-5" (click)="WeightValueHandler(WeightIncrease, 0)"><i class="bi bi-arrow-right-circle fw-bold"></i></button>
                                </div>
                            </div>
                            <div class="white-line-thin"></div>
                            <div class="row mb-3">
                                <div class="col-md-4 col-sm-4">
                                    <h4><i class="bi bi-stars" style="margin-right: 5px;"></i>Rating Kebersihan</h4>
                                </div>
                                <div class="col-md-8 col-sm-8 d-flex justify-content-center align-items-center">
                                    <button type="button" class="btn btn-secondary rounded-circle me-5" (click)="WeightValueHandler(WeightDecrease, 1)"><i class="bi bi-arrow-left-circle fw-bold"></i></button>
                                    <div class="text-center">
                                        <h4>{{ currentWeight[1] }}</h4>
                                    </div>
                                    <button type="button" class="btn btn-secondary rounded-circle ms-5" (click)="WeightValueHandler(WeightIncrease, 1)"><i class="bi bi-arrow-right-circle fw-bold"></i></button>
                                </div>
                            </div>
                            <div class="white-line-thin"></div>
                            <div class="row mb-3">
                                <div class="col-md-4 col-sm-4">
                                    <h4><i class="bi bi-wrench-adjustable-circle-fill" style="margin-right: 5px;"></i>Rating Fasilitas</h4>
                                </div>
                                <div class="col-md-8 col-sm-8 d-flex justify-content-center align-items-center">
                                    <button type="button" class="btn btn-secondary rounded-circle me-5" (click)="WeightValueHandler(WeightDecrease, 2)"><i class="bi bi-arrow-left-circle fw-bold"></i></button>
                                    <div class="text-center">
                                        <h4>{{ currentWeight[2] }}</h4>
                                    </div>
                                    <button type="button" class="btn btn-secondary rounded-circle ms-5" (click)="WeightValueHandler(WeightIncrease, 2)"><i class="bi bi-arrow-right-circle fw-bold"></i></button>
                                </div>
                            </div>
                            <div class="white-line-thin"></div>
                            <div class="row mb-3">
                                <div class="col-md-4 col-sm-4">
                                    <h4><i class="bi bi-person-hearts" style="margin-right: 5px;"></i>Rating Pelayanan</h4>
                                </div>
                                <div class="col-md-8 col-sm-8 d-flex justify-content-center align-items-center">
                                    <button type="button" class="btn btn-secondary rounded-circle me-5" (click)="WeightValueHandler(WeightDecrease, 3)"><i class="bi bi-arrow-left-circle fw-bold"></i></button>
                                    <div class="text-center">
                                        <h4>{{ currentWeight[3] }}</h4>
                                    </div>
                                    <button type="button" class="btn btn-secondary rounded-circle ms-5" (click)="WeightValueHandler(WeightIncrease, 3)"><i class="bi bi-arrow-right-circle fw-bold"></i></button>
                                </div>
                            </div>
                            <div class="white-line-thin"></div>
                            <div class="row mb-3">
                                <div class="col-md-4 col-sm-4">
                                    <h4><i class="bi bi-geo-alt-fill" style="margin-right: 5px;"></i>Rating Lokasi</h4>
                                </div>
                                <div class="col-md-8 col-sm-8 d-flex justify-content-center align-items-center">
                                    <button type="button" class="btn btn-secondary rounded-circle me-5" (click)="WeightValueHandler(WeightDecrease, 4)"><i class="bi bi-arrow-left-circle fw-bold"></i></button>
                                    <div class="text-center">
                                        <h4>{{ currentWeight[4] }}</h4>
                                    </div>
                                    <button type="button" class="btn btn-secondary rounded-circle ms-5" (click)="WeightValueHandler(WeightIncrease, 4)"><i class="bi bi-arrow-right-circle fw-bold"></i></button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row">
                <!-- <div class="col-md-6 col-sm-12 mb-3">
                    <div class="card text-center">
                        <div class="d-grid gap-2">
                            <button type="button" class="btn btn-warning" (click)="ResetWeightValue()"><i class="bi bi-x-octagon-fill" style="margin-right: 5px;"></i><b>Reset</b></button>
                        </div>
                    </div>
                </div> -->
                <div class="col-md-3"></div>
                <div class="col-md-6 col-sm-12 mb-3">
                    <div class="card text-center">
                        <div class="d-grid gap-2">
                            <button type="button" class="btn btn-success" (click)="SaveWeightValueSetting()"><i class="bi bi-floppy-fill" style="margin-right: 5px;"></i><b>Save</b></button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- #endregion -->
</div>

<app-sistem-admin [Mode]="Mode" (LoginStat)="AdminLoginHandler($event)" *ngIf="Mode.includes('Admin') == true"></app-sistem-admin>

<footer class="bg-dark text-center text-lg-start">
    <!-- Copyright -->
    <div class="text-center text-white p-3" style="background-color: rgba(0, 0, 0, 0.2);">
        Â© 2024 Copyright: Felix Nugraha
    </div>
    <!-- Copyright -->
</footer>